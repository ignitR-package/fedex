% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spatial_validate.R
\name{validate_shapefile}
\alias{validate_shapefile}
\title{Validate shapefile input}
\usage{
validate_shapefile(shapefile, crs = NULL)
}
\arguments{
\item{shapefile}{One of:
\itemize{
\item sf object (from sf::st_read() or sf::st_as_sf())
\item Character file path to shapefile (.shp, .gpkg, .geojson, etc.)
\item terra::SpatVector object
}}

\item{crs}{Expected CRS (if NULL, use the shapefile's CRS). Rarely needed.}
}
\value{
sf object in EPSG:5070 (ready for cropping/masking)
}
\description{
Takes a user-provided shapefile (sf object, file path, or SpatVector)
and validates it, then transforms it to EPSG:5070 (native CRS for WRI COGs).
}
\details{
\strong{Processing steps:}
\enumerate{
\item Convert to sf if needed (handles file paths and SpatVector)
\item Check for invalid geometries and fix if needed
\item Transform to EPSG:5070 if not already in that CRS
\item Return clean sf object
}

\strong{Geometry validation:}
Invalid geometries (self-intersections, holes, etc.) can cause errors
when cropping/masking. This function uses sf::st_make_valid() to fix
common issues automatically.
}
\examples{
\dontrun{
# From file path
my_area <- validate_shapefile("data/study_area.shp")

# From sf object
my_area <- sf::st_read("data/study_area.shp")
my_area_5070 <- validate_shapefile(my_area)

# Check the result
sf::st_crs(my_area_5070)$epsg  # Should be 5070
}

}
