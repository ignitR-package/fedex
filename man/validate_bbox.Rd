% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spatial_validate.R
\name{validate_bbox}
\alias{validate_bbox}
\title{Validate and standardize bounding box input}
\usage{
validate_bbox(bbox, crs = NULL)
}
\arguments{
\item{bbox}{Numeric vector c(xmin, ymin, xmax, ymax). Can be in any CRS.}

\item{crs}{CRS of the bbox. Can be:
\itemize{
\item NULL (default) - auto-detect based on coordinate values
\item Integer EPSG code (e.g., 4326 or 5070)
\item Proj4 string (e.g., "+proj=longlat +datum=WGS84")
\item sf::st_crs() object
}}
}
\value{
List with three elements:
\describe{
\item{bbox_5070}{terra::SpatExtent in EPSG:5070 (for data retrieval)}
\item{bbox_4326}{terra::SpatExtent in EPSG:4326 (for messages)}
\item{original_crs}{The CRS that was detected or provided}
}
}
\description{
Takes a user-provided bounding box (in any CRS) and validates it, then
transforms it to both EPSG:5070 (for data retrieval) and EPSG:4326
(for error messages). Auto-detects CRS if not provided.
}
\details{
\strong{Auto-detection logic:}
\itemize{
\item If all x-values are in \link{-180, 180} and y-values in \link{-90, 90},
assumes EPSG:4326 (lat/lon)
\item If all values are > 180, assumes EPSG:5070 (Albers, meters)
\item Otherwise, throws error asking user to specify CRS
}

\strong{Why transform to both CRS?}
\itemize{
\item EPSG:5070 is needed for cropping (native CRS of WRI COGs)
\item EPSG:4326 is needed for human-readable error messages
}
}
\examples{
\dontrun{
# Auto-detect WGS84 (lat/lon)
bbox_sf <- validate_bbox(c(-122, 37, -121, 38))
# Message: "Auto-detected bbox CRS as EPSG:4326..."

# Explicit EPSG:5070 (meters)
bbox_albers <- validate_bbox(
  c(-2000000, 1500000, -1950000, 1550000),
  crs = 5070
)

# Access the transformed extents
bbox_sf$bbox_5070  # For cropping COG
bbox_sf$bbox_4326  # For error messages
}

}
